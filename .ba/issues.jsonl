{"id":"yz-0yy0","title":"Add --session-id to wm hook compile","description":"Why: compile hook doesn't receive session_id, breaks session-level isolation. Done when: CLI accepts --session-id, compile.sh extracts from JSON and passes it, compile.rs uses it for session-scoped output.","status":"closed","priority":1,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-01T20:38:31.855058Z","updated_at":"2026-01-01T20:41:41.399992Z","closed_at":"2026-01-01T20:41:41.399992Z","blocks":[],"blocked_by":[]}
{"id":"yz-1c0y","title":"Implement generative extraction in wm extract","description":"Why: Current extraction uses heuristic merge logic which is complex and brittle. Done when: wm extract reads current state + new transcript, passes both to LLM, LLM generates complete new state. Code is simple (read, call LLM, write). LLM handles deduplication, strengthening, conflicts, supersedence.","status":"closed","priority":1,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-01T16:57:05.186979Z","updated_at":"2026-01-01T17:03:44.355312Z","closed_at":"2026-01-01T17:03:44.355312Z","blocks":[],"blocked_by":[]}
{"id":"yz-5bh0","title":"Review and reduce state.md verbosity","description":"Why: state.md has grown verbose, affecting compile quality and LLM costs. Need to audit what's being extracted and stored. Done when: state.md contains only high-value accumulated knowledge, verbose/redundant entries pruned.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-01T20:55:04.811583Z","updated_at":"2026-01-01T23:21:42.692440Z","closed_at":"2026-01-01T23:21:42.692440Z","blocks":[],"blocked_by":[]}
{"id":"yz-5pur","title":"Add deprecation warning to wm extract","description":"","status":"closed","priority":3,"issue_type":"chore","labels":[],"comments":[],"created_at":"2026-01-03T20:24:52.898660Z","updated_at":"2026-01-03T21:39:00.258488Z","closed_at":"2026-01-03T21:39:00.258488Z","blocks":[],"blocked_by":[]}
{"id":"yz-66sj","title":"Fix wm show command to read from state.md","description":"Why: wm show state reads from deprecated state.json (JSON format) instead of current state.md (markdown format). show.rs calls state::read_state() which reads state.json, but extract.rs writes to state.md. Done when: wm show state reads and displays state.md content, wm show working reads working_set.md.","status":"closed","priority":1,"issue_type":"bug","labels":[],"comments":[],"created_at":"2026-01-01T23:49:34.154120Z","updated_at":"2026-01-02T00:11:58.331099Z","closed_at":"2026-01-02T00:11:58.331099Z","blocks":[],"blocked_by":[]}
{"id":"yz-8tdz","title":"Add AIDEV-NOTE documenting graceful exit design decision","description":"Why: The code review suggested documenting why extract::run() and compile::run() return Ok() instead of Err when not initialized. Done when: AIDEV-NOTE added to extract::run() explaining the rationale (avoid error spam when superego calls wm in non-wm projects).","status":"closed","priority":4,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-03T21:08:14.198597Z","updated_at":"2026-01-03T21:17:22.583303Z","closed_at":"2026-01-03T21:17:22.583303Z","blocks":[],"blocked_by":[]}
{"id":"yz-90jh","title":"WM Distillation Rewrite - replace per-turn extraction with on-demand batch distillation","description":"","status":"open","priority":1,"issue_type":"epic","labels":[],"comments":[],"created_at":"2026-01-03T20:24:38.545332Z","updated_at":"2026-01-03T20:24:38.545332Z","blocks":[],"blocked_by":[]}
{"id":"yz-a4m3","title":"Apply same graceful exit to compile::run()","description":"Why: compile::run() still returns Err when not initialized, but extract::run() now returns Ok(). This creates inconsistency. Done when: compile::run() returns Ok(()) with eprintln message when not initialized, matching extract::run() behavior.","status":"closed","priority":3,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-03T21:08:14.104381Z","updated_at":"2026-01-03T21:12:51.618314Z","closed_at":"2026-01-03T21:12:51.618314Z","blocks":[],"blocked_by":[]}
{"id":"yz-badb","title":"Fix compile prompt input (user vs system)","description":"Why: compile_with_llm receives user prompt as 'intent' and generates explanatory content instead of filtering state.md. Done when: compile correctly filters accumulated knowledge, outputs only relevant items.","status":"closed","priority":1,"issue_type":"bug","labels":[],"comments":[],"created_at":"2026-01-01T20:55:18.617355Z","updated_at":"2026-01-03T20:48:04.149305Z","closed_at":"2026-01-03T20:48:04.149305Z","blocks":[],"blocked_by":[]}
{"id":"yz-cpyc","title":"Migrate compile.rs to use shared llm module","description":"","status":"closed","priority":3,"issue_type":"refactor","labels":[],"comments":[],"created_at":"2026-01-03T23:35:00.296297Z","updated_at":"2026-01-04T18:31:46.711377Z","closed_at":"2026-01-04T18:31:46.711377Z","blocks":[],"blocked_by":[]}
{"id":"yz-ei49","title":"Fix compile hook receiving wrong prompt format","description":"Why: Compile is called with user prompts but may not be getting the full hook input structure we expect. Need to verify what stdin actually contains during UserPromptSubmit. Done when: compile receives and parses the correct prompt/context from hook input.","status":"closed","priority":1,"issue_type":"bug","labels":[],"comments":[],"created_at":"2026-01-01T20:55:04.655425Z","updated_at":"2026-01-01T23:21:42.637186Z","closed_at":"2026-01-01T23:21:42.637186Z","blocks":[],"blocked_by":[]}
{"id":"yz-frw8","title":"Add optional --project filter to distill command","description":"Allow filtering distillation by project (e.g., --project wm) to process only transcripts from a specific project","status":"closed","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-04T00:42:54.407384Z","updated_at":"2026-01-04T18:35:20.829638Z","closed_at":"2026-01-04T18:35:20.829638Z","blocks":[],"blocked_by":[]}
{"id":"yz-fsws","title":"Implement Pass 1: batch extraction from all sessions","description":"","status":"closed","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-03T20:24:52.880899Z","updated_at":"2026-01-03T23:29:54.669367Z","closed_at":"2026-01-03T23:29:54.669367Z","blocks":["yz-u164"],"blocked_by":["yz-yb9q"]}
{"id":"yz-fu1h","title":"Graceful exit when not initialized","description":"Why: wm extract called by superego in projects without .wm/ spams error logs. Done when: extract::run() returns Ok(()) with stderr message instead of Err when not initialized, matching run_hook() behavior.","status":"closed","priority":3,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-03T12:13:19.469061Z","updated_at":"2026-01-03T21:06:40.386253Z","closed_at":"2026-01-03T21:06:40.386253Z","blocks":[],"blocked_by":[]}
{"id":"yz-hdun","title":"Add wm extract call to sg hooks","description":"Why: extraction should happen after sg clears a session - sg's hook triggers wm extract in background. Done when: sg hook runs 'wm extract &' with graceful failure if wm not installed.","status":"closed","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-01T18:45:21.777912Z","updated_at":"2026-01-01T18:52:19.610902Z","closed_at":"2026-01-01T18:52:19.610902Z","blocks":[],"blocked_by":[]}
{"id":"yz-hgt3","title":"Add --session-id to wm hook compile CLI","description":"Why: compile hook doesn't get session_id, writes to global path instead of session-scoped. Done when: 1) HookCommands::Compile accepts required --session-id arg 2) compile::run_hook() uses session_id for session-scoped paths 3) compile.sh extracts session_id from JSON and passes as CLI arg. Pattern: follow sg's evaluate.sh approach.","status":"closed","priority":1,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-01T20:38:33.996874Z","updated_at":"2026-01-01T20:41:13.056167Z","closed_at":"2026-01-01T20:41:13.056167Z","blocks":[],"blocked_by":[]}
{"id":"yz-hk48","title":"Add compress command to distill state.md","description":"Why: state.md accumulates knowledge over time and can grow unwieldy; need a way to consolidate/abstract it. Done when: wm compress reads state.md, calls LLM with a prompt that references the extract criteria but asks for higher-level synthesis, writes back a more concise state.md. Should preserve pinned/important items, merge related items, and remove obsolete ones.","status":"closed","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-02T00:13:16.852388Z","updated_at":"2026-01-02T00:26:33.231223Z","closed_at":"2026-01-02T00:26:33.231223Z","blocks":[],"blocked_by":[]}
{"id":"yz-i0ic","title":"Disable wm hooks on sg/unattended sessions","description":"Why: UserPromptSubmit hook fires on superego's internal LLM sessions, causing unwanted wm activity. Done when: wm hooks skip non-interactive sessions (sg eval, automated runs).","status":"closed","priority":1,"issue_type":"bug","labels":[],"comments":[],"created_at":"2026-01-01T20:55:29.085685Z","updated_at":"2026-01-03T20:48:04.155050Z","closed_at":"2026-01-03T20:48:04.155050Z","blocks":[],"blocked_by":[]}
{"id":"yz-ie3m","title":"Disable wm hooks during subagent/unattended runs","description":"Why: wm is triggering on sg sessions and other unattended runs, causing unnecessary LLM calls and potential interference. UserPromptSubmit fires even on subagent spawns. Done when: wm hooks detect and skip unattended/subagent sessions gracefully.","status":"closed","priority":1,"issue_type":"bug","labels":[],"comments":[],"created_at":"2026-01-01T20:55:04.734170Z","updated_at":"2026-01-01T23:22:51.138638Z","closed_at":"2026-01-01T23:22:51.138638Z","blocks":[],"blocked_by":[]}
{"id":"yz-ii0k","title":"Per-session working_set + atomic state writes + background extract","description":"Why: race conditions with multiple sessions + recursion loop. Done when: working_set.md in sessions/<id>/, state.md uses atomic rename, extract runs in background, SUPEREGO_DISABLED=1 set during LLM call.","status":"closed","priority":0,"issue_type":"bug","labels":[],"comments":[],"created_at":"2026-01-01T20:17:48.356591Z","updated_at":"2026-01-01T20:25:43.228323Z","closed_at":"2026-01-01T20:25:43.228323Z","blocks":[],"blocked_by":[]}
{"id":"yz-jew0","title":"Extract shared LLM utilities from distill.rs and extract.rs","description":"","status":"closed","priority":3,"issue_type":"refactor","labels":[],"comments":[],"created_at":"2026-01-03T23:29:30.366316Z","updated_at":"2026-01-03T23:35:10.146113Z","closed_at":"2026-01-03T23:35:10.146113Z","blocks":[],"blocked_by":[]}
{"id":"yz-jx0k","title":"Delete SPEC.md and update CLAUDE.md","description":"Why: SPEC.md is outdated (claims compile is <100ms no-LLM, but LLM-based compile is the correct design). Done when: SPEC.md removed, CLAUDE.md reflects actual architecture.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-01T20:58:09.201041Z","updated_at":"2026-01-01T21:02:19.492374Z","closed_at":"2026-01-01T21:02:19.492374Z","blocks":[],"blocked_by":[]}
{"id":"yz-kr9r","title":"Add error logging and summary for distill extraction failures","description":"","status":"closed","priority":3,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-03T23:29:30.563235Z","updated_at":"2026-01-03T23:39:31.218390Z","closed_at":"2026-01-03T23:39:31.218390Z","blocks":[],"blocked_by":[]}
{"id":"yz-loar","title":"Create release script for wm (crates.io + Homebrew)","description":"Why: Need automated release workflow like superego has. Done when: scripts/release.sh handles version bumping, testing, crates.io publish, and Homebrew formula updates.","status":"closed","priority":1,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-01T18:58:32.627450Z","updated_at":"2026-01-01T19:02:28.841984Z","closed_at":"2026-01-01T19:02:28.841984Z","blocks":[],"blocked_by":[]}
{"id":"yz-mbi2","title":"Add drop guard for env var cleanup in LLM calls","description":"","status":"closed","priority":3,"issue_type":"refactor","labels":[],"comments":[],"created_at":"2026-01-03T23:29:30.465566Z","updated_at":"2026-01-03T23:36:53.149323Z","closed_at":"2026-01-03T23:36:53.149323Z","blocks":[],"blocked_by":[]}
{"id":"yz-oftn","title":"Fix wm transcript handling - use session-id like sg","description":"Why: wm uses fragile byte-position checkpoint that breaks on transcript rotation/compaction and causes cross-session bleed. Done when: wm takes --session-id, parses JSONL properly, filters by session like sg does.","status":"closed","priority":0,"issue_type":"bug","labels":[],"comments":[],"created_at":"2026-01-01T20:00:02.741924Z","updated_at":"2026-01-01T20:05:00.816067Z","closed_at":"2026-01-01T20:05:00.816067Z","blocks":[],"blocked_by":[]}
{"id":"yz-ouwz","title":"Review and reduce state.md verbosity","description":"Why: state.md appears overly verbose. Done when: state format reviewed, extraction refined to capture concise knowledge items.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-01T20:55:31.846206Z","updated_at":"2026-01-01T23:21:42.664207Z","closed_at":"2026-01-01T23:21:42.664207Z","blocks":[],"blocked_by":[]}
{"id":"yz-pczi","title":"Polish AIDEV-NOTE graceful exit documentation","description":"Minor refinements from code review: (1) compile.rs could mention UserPromptSubmit hook specifically, (2) run_hook() functions could have cross-reference to run() rationale, (3) could list all user-invoked commands instead of 'like show/status'. All optional polish.","status":"closed","priority":4,"issue_type":"chore","labels":[],"comments":[],"created_at":"2026-01-03T21:18:52.575691Z","updated_at":"2026-01-03T21:20:30.312463Z","closed_at":"2026-01-03T21:20:30.312463Z","blocks":[],"blocked_by":[]}
{"id":"yz-pltc","title":"OH integration: push guardrails/metis candidates via MCP","description":"","status":"open","priority":3,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-03T20:24:52.903901Z","updated_at":"2026-01-03T20:25:06.597776Z","blocks":[],"blocked_by":["yz-u164"]}
{"id":"yz-q7bg","title":"Bootstrap Homebrew repo for wm releases","description":"Why: Release script failed to update sha256 in Homebrew formula - repo may need initial setup. Done when: wm releases automatically update the Homebrew formula with correct sha256.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-01T23:51:34.194348Z","updated_at":"2026-01-01T23:58:31.596831Z","closed_at":"2026-01-01T23:58:31.596831Z","blocks":[],"blocked_by":[]}
{"id":"yz-qels","title":"Add compress command to distill state.md","description":"Why: state.md accumulates knowledge over time and can grow unwieldy; need a way to consolidate/abstract it. Done when: wm compress reads state.md, calls LLM with a prompt that references the extract criteria but asks for higher-level synthesis, writes back a more concise state.md. Should preserve pinned/important items, merge related items, and remove obsolete ones.","status":"closed","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-02T00:14:18.737066Z","updated_at":"2026-01-03T20:25:37.030281Z","closed_at":"2026-01-03T20:25:37.030281Z","blocks":[],"blocked_by":[]}
{"id":"yz-rxna","title":"Remove --background from wm extract in sg hook calls","description":"Why: background mode adds complexity and race conditions. Done when: sg calls wm extract synchronously.","status":"closed","priority":2,"issue_type":"task","labels":[],"comments":[],"created_at":"2026-01-01T20:04:50.578800Z","updated_at":"2026-01-01T20:07:51.770978Z","closed_at":"2026-01-01T20:07:51.770978Z","blocks":[],"blocked_by":[]}
{"id":"yz-u164","title":"Implement Pass 2: categorize into guardrails vs metis","description":"","status":"open","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-03T20:24:52.886652Z","updated_at":"2026-01-03T20:25:06.597776Z","blocks":["yz-xzof","yz-pltc"],"blocked_by":["yz-fsws"]}
{"id":"yz-uifx","title":"Implement wm compile - surface relevant knowledge based on intent","description":"Why: compile reads state.md + user intent, surfaces relevant metis for the executing LLM. Done when: wm compile --intent '...' outputs working_set.md with relevant knowledge filtered from state.","status":"closed","priority":1,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-01T18:17:37.289902Z","updated_at":"2026-01-01T18:39:59.038541Z","closed_at":"2026-01-01T18:39:59.038541Z","blocks":[],"blocked_by":[]}
{"id":"yz-x7op","title":"Create wm Claude plugin - install post-submit hook","description":"Why: wm compile needs to run on every user submission to inject relevant context. Done when: claude plugin install wm sets up user_prompt_submit hook that calls wm hook compile.","status":"closed","priority":1,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-01T18:44:23.420012Z","updated_at":"2026-01-01T18:51:34.932945Z","closed_at":"2026-01-01T18:51:34.932945Z","blocks":[],"blocked_by":[]}
{"id":"yz-xzjx","title":"Add session discovery - find all transcripts in ~/.claude/projects/<project-id>/","description":"","status":"closed","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-03T20:24:52.869326Z","updated_at":"2026-01-03T22:38:04.236204Z","closed_at":"2026-01-03T22:38:04.236204Z","blocks":["yz-yb9q"],"blocked_by":[]}
{"id":"yz-xzof","title":"Update compile to read from distilled/ instead of state.md","description":"","status":"open","priority":2,"issue_type":"refactor","labels":[],"comments":[],"created_at":"2026-01-03T20:24:52.892699Z","updated_at":"2026-01-03T20:25:06.592024Z","blocks":[],"blocked_by":["yz-u164"]}
{"id":"yz-yb9q","title":"Add distill command CLI with --dry-run, --force, --push-to-oh, --context-id options","description":"","status":"closed","priority":2,"issue_type":"feature","labels":[],"comments":[],"created_at":"2026-01-03T20:24:52.874771Z","updated_at":"2026-01-03T22:45:29.208724Z","closed_at":"2026-01-03T22:45:29.208724Z","blocks":["yz-fsws"],"blocked_by":["yz-xzjx"]}
